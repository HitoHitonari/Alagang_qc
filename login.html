<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <link rel="stylesheet" href="globals.css" />
  <link rel="stylesheet" href="style.css" />
  <title>Login Page</title>
  
  <!-- SweetAlert2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet" />
</head>
<body>
  <div class="HEADER">
    <header class="header">
      <div class="frame">
        <div class="LOGO"></div>
      </div>
      <div class="div">
        <div class="TEXT-HOVER"><a href="index.html" class="nav-link">HOME</a></div>
        <div class="TEXT-HOVER"><a href="aboutus.html" class="nav-link">ABOUT US</a></div>
        <div class="TEXT-HOVER"><a href="services.html" class="nav-link">SERVICES</a></div>
        <div class="LOCATION-DROPDOWN">
          <button class="dropdown-button" aria-haspopup="true" aria-expanded="false" onclick="toggleDropdown()">
            <span class="text-wrapper-2">LOCATION</span>
            <img class="ri-arrow-down-s-line" src="./imgs/ri_arrow-down-s-line.png" alt="Dropdown arrow" />
          </button>
          <div class="dropdown-menu" id="locationDropdown">
            <a href="district_1.html" class="dropdown-item">District I</a>
            <a href="district_2.html" class="dropdown-item">District II</a>
            <a href="district_3.html" class="dropdown-item">District III</a>
            <a href="district_4.html" class="dropdown-item">District IV</a>
            <a href="district_5.html" class="dropdown-item">District V</a>
            <a href="district_6.html" class="dropdown-item">District VI</a>
          </div>
        </div>
      </div>
    </header>
  </div>

  <section class="registration-section">
    <div class="registration-content">
      <div class="left-column">
        <h1 class="main-heading">MABUHAY!</h1>
        <p class="welcome-text">
          Welcome to Alagang Bayan, your digital health partner in Quezon City. Register to schedule appointments, view your medical history, and track your vaccinations with ease.
        </p>
      </div>

      <div class="right-column">
        <div class="form-card">
          <h2 class="form-heading">LOG IN YOUR ACCOUNT</h2>
          <form id="loginForm">
            <input type="email" name="emailaddress" placeholder="Email Address" class="input-field" required />
            <input type="password" name="password" placeholder="Password" class="input-field" required />
            <button type="submit" class="signup-button">LOGIN</button>
          </form>
          <div class="divider">
            <span class="divider-line"></span>
            <span class="or-text">OR</span>
            <span class="divider-line"></span>
          </div>
          <div class="social-login">
            <img src="./imgs/GOOGLE.png" alt="Google" class="social-icon" />
            <img src="./imgs/FACEBOOK.png" alt="Facebook" class="social-icon" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer-section">
    <div class="footer-background">
      <div class="footer-content">
        <div class="footer-left">
          <h3 class="footer-title">ALAGANG BAYAN:</h3>
          <p class="footer-subtitle">QUEZON CITY MUNICIPAL HEALTH INFORMATION SYSTEM</p>
          <div class="social-media-icons">
            <img src="./imgs/fb_Icon.svg" alt="Facebook" class="social-icon" />
            <img src="./imgs/linkedin_Icon.svg" alt="LinkedIn" class="social-icon" />
            <img src="./imgs/yt_Icon.svg" alt="YouTube" class="social-icon" />
            <img src="./imgs/ig_Icon.svg" alt="Instagram" class="social-icon" />
          </div>
        </div>
        <div class="footer-center">
          <h4 class="footer-heading">Hotlines:</h4>
          <p class="footer-phone">+1702921379</p>
          <p class="footer-phone">+09123456789</p>
        </div>
        <div class="footer-right">
          <h4 class="footer-heading">Email Us:</h4>
          <p class="footer-email">alagangbayan.qc.ph@gmail.com</p>
          <p class="footer-email">info@alagangbayan.qc.ph</p>
          <h4 class="footer-heading">Support:</h4>
          <ul class="footer-support-list">
            <li><a href="feedback.html" class="footer-support-link">Feedback Form</a></li>
            <li><a href="#" class="footer-support-link">Chatbot</a></li>
            <li><a href="#" class="footer-support-link">FAQS</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
  // Dropdown toggle function
  function toggleDropdown() {
    const dropdown = document.getElementById('locationDropdown');
    const button = document.querySelector('.dropdown-button');
    const isExpanded = button.getAttribute('aria-expanded') === 'true';

    dropdown.classList.toggle('show');
    button.setAttribute('aria-expanded', !isExpanded);
  }

  // Close dropdown when clicking outside
  window.addEventListener('click', function(event) {
    if (!event.target.closest('.dropdown-button')) {
      const dropdown = document.getElementById('locationDropdown');
      const button = document.querySelector('.dropdown-button');
      dropdown.classList.remove('show');
      button.setAttribute('aria-expanded', 'false');
    }
  });

  // Close dropdown on Escape key
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      const dropdown = document.getElementById('locationDropdown');
      const button = document.querySelector('.dropdown-button');
      dropdown.classList.remove('show');
      button.setAttribute('aria-expanded', 'false');
      button.focus();
    }
  });

  // Create default test account if none exists
  if (!localStorage.getItem('email')) {
    localStorage.setItem('email', 'test@example.com');
    localStorage.setItem('password', '123456');
  }

  // Login form handler
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.querySelector('input[name="emailaddress"]').value.trim();
    const password = document.querySelector('input[name="password"]').value.trim();

    const storedEmail = localStorage.getItem('email');
    const storedPassword = localStorage.getItem('password');

    if (email === storedEmail && password === storedPassword) {
      localStorage.setItem('isLoggedIn', 'true');
      Swal.fire({
        icon: 'success',
        title: 'Login Successful!',
        text: 'Welcome back!',
        confirmButtonText: 'Continue'
      }).then(() => {
        window.location.href = "loggedin.html";
      });
    } else {
      Swal.fire({
        icon: 'error',
        title: 'Login Failed',
        text: 'Invalid credentials. Please try again.',
      });
    }
  });

  // Optional: Auto redirect if already logged in
  if (localStorage.getItem('loggedIn') === 'true') {
    console.log('User already logged in.');
    // window.location.href = "loggedin.html";
  }
</script>

</body>
</html>
